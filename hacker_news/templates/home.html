{% extends 'base.html' %} {% block title%} Home {% endblock %} {% set
active_page = "home" %} {% block body %}
<nav>
    <div
        class="nav nav-pills align-items-center justify-content-end mb-2"
        id="storyTabs"
        role="tablist"
    >
        <a
            class="btn btn-link me-auto"
            href="{{ url_for('home.update') }}"
            onclick="toggle_refresh()"
            role="button"
            style="text-decoration: none"
        >
            Refresh&nbsp;
            <div
                class="spinner-border spinner-border-sm text-primary"
                role="status"
                id="refresh_icon"
                style="display: none"
            ></div>
        </a>
        <a
            class="nav-link active"
            id="nav-top-tab"
            data-bs-toggle="tab"
            type="button"
            role="tab"
            href="#top_stories"
        >
            Top Stories
        </a>
        <a
            class="nav-link"
            id="nav-new-tab"
            data-bs-toggle="tab"
            type="button"
            role="tab"
            href="#new_stories"
        >
            New Stories
        </a>
    </div>
</nav>
<div class="tab-content" id="nav-tabContent">
    <div
        class="tab-pane fade show active"
        id="top_stories"
        role="tabpanel"
        tabindex="0"
    >
        <table class="table table-striped table-hover">
            {% for count, story, publish_time in top_stories %}
            <tr>
                <td>
                    <div class="d-flex px-2">
                        <div class="pe-4"># {{ count }}</div>
                        <div>
                            <div>
                                <a
                                    class="fw-bold link-unstyled"
                                    href="{{ story.url }}"
                                    >{{ story.title }}</a
                                >
                            </div>
                            <small>
                                {{ story.score }} points by {{ story.author }}
                                {% if publish_time > 60 %} {{ publish_time //
                                60}} hours ago | {% else %} {{ publish_time }}
                                minutes ago | {% endif %}
                                <a
                                    class="link-unstyled"
                                    href="{{ url_for('story.index', id=story.id) }}"
                                    >{{ story.num_comments }} comments</a
                                >
                            </small>
                        </div>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <div class="tab-pane fade" id="new_stories" role="tabpanel" tabindex="0">
        <table class="table table-striped">
            {% for count, story, publish_time in new_stories %}
            <tr>
                <td>
                    <div class="d-flex px-2">
                        <div class="pe-4"># {{ count }}</div>
                        <div>
                            <div>
                                <a
                                    class="fw-bold link-unstyled"
                                    href="{{ story.url }}"
                                    >{{ story.title }}</a
                                >
                            </div>
                            <small>
                                {{ story.score }} points by {{ story.author }}
                                {% if publish_time > 60 %} {{ publish_time //
                                60}} hours ago | {% else %} {{ publish_time }}
                                minutes ago | {% endif %}
                                <a
                                    class="link-unstyled"
                                    href="{{ url_for('story.index', id=story.id) }}"
                                    >{{ story.num_comments }} comments</a
                                >
                            </small>
                        </div>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>
<script>
    /* Function for triggering visual updates*/
    const toggle_refresh = () => {
        refresh_icon = document.getElementById("refresh_icon");
        refresh_icon.style.display = "";
    };
</script>
{% endblock body %}
